<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØµÙ„Ø§ØªÙŠ - ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ•Œ</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <style>
        /* ========== Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ========== */
        :root {
            --primary-color: #2a9d8f;
            --primary-dark: #264653;
            --secondary-color: #e76f51;
            --accent-color: #f4a261;
            --background-color-light: #F8FAFC;
            --card-color-light: #FFFFFF;
            --text-color-light: #0F172A;
            --light-text-light: #64748B;
            --border-color-light: #E2E8F0;
            --background-color-dark: #0F172A;
            --card-color-dark: #1E293B;
            --text-color-dark: #F8FAFC;
            --light-text-dark: #94A3B8;
            --border-color-dark: #334155;

            --background-color: var(--background-color-light);
            --card-color: var(--card-color-light);
            --text-color: var(--text-color-light);
            --light-text: var(--light-text-light);
            --border-color: var(--border-color-light);
            
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --transition: all 0.3s ease;
            --gradient: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
        }

        body.dark-mode {
            --background-color: var(--background-color-dark);
            --card-color: var(--card-color-dark);
            --text-color: var(--text-color-dark);
            --light-text: var(--light-text-dark);
            --border-color: var(--border-color-dark);
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Tajawal', sans-serif; }

        body { 
            background-color: var(--background-color); 
            color: var(--text-color); 
            line-height: 1.6; 
            padding: 20px; 
            min-height: 100vh; 
            transition: background-color 0.3s, color 0.2s;
        }
        
        body::before { 
            content: ''; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100vh; 
            background-color: var(--transition-bg, transparent); 
            z-index: 9999; 
            clip-path: circle(0% at var(--clip-x, 50%) var(--clip-y, 50%)); 
            transition: clip-path 0.6s cubic-bezier(0.65, 0, 0.35, 1); 
            pointer-events: none; 
        }
        body.transition-active::before { 
            clip-path: circle(150% at var(--clip-x, 50%) var(--clip-y, 50%)); 
        }

        .container { max-width: 1200px; margin: 0 auto; }

        /* ===== Ø§Ù„Ù‡ÙŠØ¯Ø± ===== */
        header { 
            text-align: center; 
            margin-bottom: 40px; 
            padding: 30px; 
            background: var(--gradient); 
            border-radius: var(--radius); 
            box-shadow: var(--shadow); 
            position: relative; 
            overflow: hidden; 
            color: white; 
        }
        header::before { 
            content: ""; 
            position: absolute; 
            top: -50%; 
            left: -50%; 
            width: 200%; 
            height: 200%; 
            background: rgba(255, 255, 255, 0.1); 
            transform: rotate(25deg); 
        }
        .header-top { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: relative; 
            z-index: 2; 
            margin-bottom: 20px; 
        }
        .header-controls { 
            display: flex; 
            align-items: center; 
            gap: 15px; 
        }

        .theme-switcher, .lang-switcher { 
            display: flex; 
            align-items: center; 
            justify-content: space-around; 
            background-color: rgba(0, 0, 0, 0.25); 
            padding: 5px 15px; 
            border-radius: 50px; 
            cursor: pointer; 
            position: relative; 
            height: 40px; 
            color: white;
            gap: 8px;
        }
        .theme-switcher { width: 70px; }
        .lang-switcher { 
            width: 60px; 
            justify-content: center; 
            font-weight: bold; 
            font-size: 1rem; 
        }
        
        .theme-switcher-handle { 
            position: absolute; 
            width: 30px; 
            height: 30px; 
            background-color: var(--secondary-color); 
            border-radius: 50%; 
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); 
            top: 5px; 
        }
        html[dir="rtl"] .theme-switcher-handle { right: 5px; }
        html[dir="ltr"] .theme-switcher-handle { left: 5px; }
        
        html[dir="rtl"] body.dark-mode .theme-switcher-handle { transform: translateX(-30px); }
        html[dir="ltr"] body.dark-mode .theme-switcher-handle { transform: translateX(30px); }
        
        .theme-switcher i { 
            width: 30px; 
            height: 30px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            z-index: 1; 
            transition: transform 0.3s ease, color 0.3s ease; 
        }
        body:not(.dark-mode) .fa-sun { color: #fff; transform: scale(1.1) rotate(360deg); }
        body.dark-mode .fa-moon { color: #fff; transform: scale(1.1) rotate(360deg); }
        
        h1 { 
            margin-bottom: 10px; 
            font-size: 2.5rem; 
            position: relative; 
            font-weight: 800; 
        }
        .subtitle { 
            font-size: 1.2rem; 
            opacity: 0.9; 
            font-weight: 300; 
        }

        /* ===== Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ ===== */
        .main-nav { 
            display: flex; 
            justify-content: center; 
            background-color: rgba(0,0,0,0.2); 
            border-radius: 50px; 
            padding: 5px; 
            margin-top: 20px; 
            position: relative; 
            z-index: 2; 
            flex-wrap: wrap; 
            gap: 5px;
        }
        .nav-tab { 
            background-color: transparent; 
            border: none; 
            color: white; 
            padding: 10px 25px; 
            border-radius: 50px; 
            cursor: pointer; 
            transition: var(--transition); 
            font-weight: bold; 
            font-size: 1rem; 
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        .nav-tab.active { 
            background-color: var(--secondary-color); 
        }

        /* ===== Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ===== */
        .progress-section {
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .progress-title {
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .progress-percentage {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .progress-bar-container {
            width: 100%;
            height: 25px;
            background: var(--border-color);
            border-radius: 50px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: var(--gradient);
            transition: width 0.5s ease;
            border-radius: 50px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: var(--light-text);
            font-size: 0.95rem;
        }

        /* ===== Ù…Ø­Ø¯Ø¯ Ø§Ù„ÙŠÙˆÙ… (Ù…ØªØ±Ø¬Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) ===== */
        .day-selector {
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .day-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .day-buttons {
            display: flex;
            gap: 10px;
        }
        
        .day-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: var(--gradient);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .day-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }
        
        .day-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: var(--border-color);
        }
        
        .day-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .day-title span {
            color: var(--light-text);
            font-size: 1rem;
            margin-right: 5px;
        }

        /* ===== Ø¨Ø·Ø§Ù‚Ø© ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ ===== */
        .taraweeh-section {
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .taraweeh-card {
            background: var(--background-color);
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            padding: 30px;
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
            transition: var(--transition);
        }
        
        .taraweeh-card.completed {
            border-color: var(--primary-color);
            background-color: rgba(42, 157, 143, 0.05);
        }
        
        .taraweeh-card.locked {
            opacity: 0.7;
            filter: blur(1px);
            pointer-events: none;
            position: relative;
        }
        
        .taraweeh-card.locked::before {
            content: 'ğŸ”’';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            z-index: 10;
        }
        
        .prayer-icon {
            font-size: 5rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .prayer-status {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .status-badge {
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            font-size: 1.1rem;
        }
        
        .status-badge.prayed {
            background: var(--primary-color);
            color: white;
        }
        
        .status-badge.not-prayed {
            background: var(--background-color);
            color: var(--text-color);
            border: 2px solid var(--border-color);
        }
        
        .status-badge:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .status-badge:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .rakat-selector {
            margin: 30px 0;
        }
        
        .rakat-label {
            font-size: 1.2rem;
            color: var(--light-text);
            margin-bottom: 15px;
        }
        
        .rakat-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .rakat-option {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            background: var(--background-color);
            color: var(--text-color);
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .rakat-option:hover:not(.selected):not(:disabled) {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
            border-color: var(--primary-color);
        }
        
        .rakat-option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .rakat-option:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .save-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 300px;
        }
        
        .save-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }
        
        .save-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ===== Ø§Ù„ØªÙ‚ÙˆÙŠÙ… (Ù…ØªØ±Ø¬Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) ===== */
        .calendar-section {
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .calendar-section h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .calendar-day {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 15px;
            transition: var(--transition);
            text-align: center;
            cursor: pointer;
        }
        
        .calendar-day:hover:not(.future):not(.locked) {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .calendar-day.today {
            border: 2px solid var(--primary-color);
        }
        
        .calendar-day.completed {
            border-color: var(--primary-color);
            background-color: rgba(42, 157, 143, 0.1);
        }
        
        .calendar-day.active {
            border: 3px solid var(--secondary-color);
            transform: scale(1.02);
        }
        
        .calendar-day.future {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: var(--border-color);
            position: relative;
        }
        
        .calendar-day.future::after {
            content: 'ğŸ”’';
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 1rem;
        }
        
        .calendar-day.future:hover {
            transform: none;
            box-shadow: none;
        }

        .calendar-day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .calendar-day-name {
            font-size: 1rem;
        }
        
        .calendar-day-date {
            color: var(--light-text);
            font-size: 0.8rem;
        }
        
        .calendar-day-status {
            font-size: 2rem;
            margin: 10px 0;
            color: var(--light-text);
        }
        
        .calendar-day.completed .calendar-day-status {
            color: var(--primary-color);
        }
        
        .calendar-day-stats {
            font-size: 1rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* ===== Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Ù…ØªØ±Ø¬Ù…Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) ===== */
        .stats-section {
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .stats-section h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 25px;
            background: var(--background-color);
            border-radius: var(--radius);
            transition: var(--transition);
        }
        
        .stat-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .stat-label {
            color: var(--light-text);
            font-size: 1rem;
        }

        /* ===== Ø¹Ù†Ø§ØµØ± Ù…Ø³Ø§Ø¹Ø¯Ø© ===== */
        .notification { 
            position: fixed; 
            top: 30px; 
            right: 30px; 
            background: var(--gradient); 
            color: white; 
            padding: 15px 25px; 
            border-radius: var(--radius); 
            box-shadow: var(--shadow); 
            transform: translateX(150%); 
            transition: transform 0.4s ease; 
            z-index: 3000; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            max-width: 400px; 
        }
        .notification.show { 
            transform: translateX(0); 
        }

        #back-to-top-btn { 
            position: fixed; 
            bottom: 30px; 
            right: 30px; 
            width: 50px; 
            height: 50px; 
            background: var(--primary-color); 
            color: white; 
            border: none; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 1.2rem; 
            cursor: pointer; 
            box-shadow: var(--shadow); 
            opacity: 0; 
            visibility: hidden; 
            transform: translateY(20px); 
            transition: all 0.3s ease; 
            z-index: 1500; 
        }
        #back-to-top-btn.show { 
            opacity: 1; 
            visibility: visible; 
            transform: translateY(0); 
        }

        @media (max-width: 768px) { 
            .header-top { flex-wrap: wrap; gap: 20px; justify-content: center; }
            h1 { font-size: 1.8rem; }
            .day-nav { flex-direction: column; text-align: center; }
            .rakat-options { gap: 10px; }
            .rakat-option { width: 50px; height: 50px; font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <div class="header-controls">
                    <div class="theme-switcher" id="theme-switcher" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¸Ù‡Ø±">
                        <div class="theme-switcher-handle"></div>
                        <i class="fas fa-sun"></i>
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="lang-switcher" id="lang-switcher" title="ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©">
                        <span id="lang-toggle">EN</span>
                    </div>
                </div>
                <div style="flex-grow: 1;"></div>
<h1>
    <i class="fas fa-mosque"></i>
    <span data-key="appTitle">ØµÙ„Ø§ØªÙŠ</span>
    <span class="title-separator"> | </span>
    <span data-key="pageTitle">ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­</span>
</h1>


                <div style="flex-grow: 1;"></div>
                <div class="header-controls" style="visibility: hidden;">
                    <div class="theme-switcher"></div>
                    <div class="lang-switcher"></div>
                </div>
            </div>
            
            <p class="subtitle" data-key="subtitle">ØªØªØ¨Ø¹ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ </p>

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
           <div class="main-nav">
    <a href="index.html" class="nav-tab" data-key="navHome">
        <i class="fas fa-home"></i> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    </a>

    <a href="Taktem.html" class="nav-tab" data-key="navQuranKhatm">
        <i class="fas fa-book-quran"></i> Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†
    </a>

                                    <a href="quran.html" class="nav-tab " data-key="navMushaf"><i class="fas fa-book-open"></i> Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ</a>


    <a href="azkar_ramadan.html" class="nav-tab" data-key="navRamadanDuas">
        <i class="fas fa-moon"></i> Ø£Ø¯Ø¹ÙŠØ© Ø±Ù…Ø¶Ø§Ù†
    </a>

    <a href="taraweeh.html" class="nav-tab active" data-key="navTaraweeh">
        <i class="fas fa-mosque"></i> Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­
    </a>

    <a href="sadakate.html" class="nav-tab" data-key="navSadaqati">
        <i class="fas fa-hand-holding-heart"></i> ØµØ¯Ù‚Ø§ØªÙŠ
    </a>
     <a href="mosabaka.html" class="nav-tab " data-key="navQuestions"><i class="fas fa-question-circle"></i> Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</a>
                <a href="ahades.html" class="nav-tab" data-key="navHadith"><i class="fas fa-book-open"></i> Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</a>

    <a href="lessons.html" class="nav-tab" data-key="navLessons">
        <i class="fas fa-video"></i> Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¯ÙŠÙ†ÙŠØ©
    </a>
    <a href="about.html" class="nav-tab" data-key="aboutSite">
    Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹
</a>
</div>

        </header>

        <main>
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
            <div class="progress-section">
                <div class="progress-header">
                    <div class="progress-title">
                        <i class="fas fa-chart-line"></i>
                        <span data-key="progressTitle">ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø§Ù„Ø´Ù‡Ø±</span>
                    </div>
                    <div class="progress-percentage" id="progress-percentage">0%</div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="progress-bar" style="width: 0%"></div>
                </div>
                <div class="progress-stats">
                    <span id="completed-days-count">0</span> / <span id="total-days-count">30</span>
                    <span data-key="daysCompleted">Ø£ÙŠØ§Ù… Ù…ÙƒØªÙ…Ù„Ø©</span>
                </div>
            </div>

            <!-- Ù…Ø­Ø¯Ø¯ Ø§Ù„ÙŠÙˆÙ… (Ù…ØªØ±Ø¬Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) -->
            <div class="day-selector">
                <div class="day-nav">
                    <div class="day-buttons">
                        <button class="day-btn" id="prev-day" title="Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚"><i class="fas fa-chevron-right"></i></button>
                        <button class="day-btn" id="next-day" title="Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ"><i class="fas fa-chevron-left"></i></button>
                    </div>
                    <div class="day-title" id="day-title"></div>
                    <button class="day-btn" id="today-btn" title="Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ"><i class="fas fa-calendar-day"></i></button>
                </div>
            </div>

            <!-- Ø¨Ø·Ø§Ù‚Ø© ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ -->
            <div class="taraweeh-section">
                <div class="taraweeh-card" id="taraweeh-card">
                    <div class="prayer-icon">
                        <i class="fas fa-mosque"></i>
                    </div>
                    
                    <div class="prayer-status">
                        <button class="status-badge" id="prayed-btn" onclick="setPrayerStatus(true)">
                            <i class="fas fa-check-circle"></i> <span data-key="prayed">ØµÙ„ÙŠØª</span>
                        </button>
                        <button class="status-badge" id="not-prayed-btn" onclick="setPrayerStatus(false)">
                            <i class="fas fa-times-circle"></i> <span data-key="notPrayed">Ù„Ù… Ø£ØµÙ„</span>
                        </button>
                    </div>

                    <div class="rakat-selector">
                        <div class="rakat-label" data-key="selectRakats">Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ø±ÙƒØ¹Ø§Øª</div>
                        <div class="rakat-options" id="rakat-options">
                            <!-- Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                        </div>
                    </div>

                    <button class="save-btn" id="save-btn" onclick="savePrayer()">
                        <i class="fas fa-save"></i> <span data-key="save">Ø­ÙØ¸</span>
                    </button>
                </div>
            </div>

            <!-- Ø§Ù„ØªÙ‚ÙˆÙŠÙ… (Ù…ØªØ±Ø¬Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) -->
            <div class="calendar-section">
                <h2><i class="fas fa-calendar-alt"></i> <span data-key="calendarTitle">Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø±</span></h2>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>

            <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Ù…ØªØ±Ø¬Ù…Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„) -->
            <div class="stats-section">
                <h2><i class="fas fa-chart-pie"></i> <span data-key="statsTitle">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­</span></h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="total-days">0</div>
                        <div class="stat-label" data-key="totalDays">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙŠØ§Ù…</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="prayed-days">0</div>
                        <div class="stat-label" data-key="prayedDays">Ø£ÙŠØ§Ù… ØµÙ„ÙŠØª</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="missed-days">0</div>
                        <div class="stat-label" data-key="missedDays">Ø£ÙŠØ§Ù… ÙØ§ØªØª</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="total-rakats">0</div>
                        <div class="stat-label" data-key="totalRakats">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙƒØ¹Ø§Øª</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="avg-rakats">0</div>
                        <div class="stat-label" data-key="avgRakats">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø±ÙƒØ¹Ø§Øª</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="best-day">-</div>
                        <div class="stat-label" data-key="bestDay">Ø£ÙØ¶Ù„ ÙŠÙˆÙ…</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <button id="back-to-top-btn" title="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰"><i class="fas fa-arrow-up"></i></button>
    <div class="notification" id="notification"></div>

    <script>
        (function() {
            // --- Ø¹Ù†Ø§ØµØ± DOM ---
            const themeSwitcher = document.getElementById('theme-switcher');
            const langSwitcher = document.getElementById('lang-switcher');
            const notification = document.getElementById('notification');
            const backToTopBtn = document.getElementById('back-to-top-btn');
            const calendarGrid = document.getElementById('calendar-grid');
            
            const prevDayBtn = document.getElementById('prev-day');
            const nextDayBtn = document.getElementById('next-day');
            const todayBtn = document.getElementById('today-btn');
            const dayTitle = document.getElementById('day-title');
            
            const taraweehCard = document.getElementById('taraweeh-card');
            const prayedBtn = document.getElementById('prayed-btn');
            const notPrayedBtn = document.getElementById('not-prayed-btn');
            const rakatOptions = document.getElementById('rakat-options');
            const saveBtn = document.getElementById('save-btn');
            
            // Ø¹Ù†Ø§ØµØ± Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            const progressBar = document.getElementById('progress-bar');
            const progressPercentage = document.getElementById('progress-percentage');
            const completedDaysCount = document.getElementById('completed-days-count');
            const totalDaysCount = document.getElementById('total-days-count');
            
            // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            const totalDaysEl = document.getElementById('total-days');
            const prayedDaysEl = document.getElementById('prayed-days');
            const missedDaysEl = document.getElementById('missed-days');
            const totalRakatsEl = document.getElementById('total-rakats');
            const avgRakatsEl = document.getElementById('avg-rakats');
            const bestDayEl = document.getElementById('best-day');

            // --- Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø±ÙƒØ¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© ---
            const rakatValues = [2, 4, 6, 8, 10, 11];

            // --- Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© ---
            const translations = {
                ar: {
                    pageTitle: "ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­",
                    subtitle: "ØªØªØ¨Ø¹ ØµÙ„Ø§Ø© Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­ ",
                    navHome: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
navRamadanDuas: "Ø£Ø¯Ø¹ÙŠØ© Ø±Ù…Ø¶Ø§Ù†",
appTitle: "ØµÙ„Ø§ØªÙŠ",
aboutSite: "Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹",


                    navTaraweeh: "Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­",
                    navSadaqati: "ØµØ¯Ù‚Ø§ØªÙŠ",
                    progressTitle: "ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø§Ù„Ø´Ù‡Ø±",
                    daysCompleted: "Ø£ÙŠØ§Ù… Ù…ÙƒØªÙ…Ù„Ø©",
                    calendarTitle: "Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø±",
                    statsTitle: "Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­",
                    totalDays: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ÙŠØ§Ù…",
                    prayedDays: "Ø£ÙŠØ§Ù… ØµÙ„ÙŠØª",
                    missedDays: "Ø£ÙŠØ§Ù… ÙØ§ØªØª",
                    totalRakats: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙƒØ¹Ø§Øª",
                    avgRakats: "Ù…ØªÙˆØ³Ø· Ø§Ù„Ø±ÙƒØ¹Ø§Øª",
                    bestDay: "Ø£ÙØ¶Ù„ ÙŠÙˆÙ…",
                    prayed: "ØµÙ„ÙŠØª",
                    notPrayed: "Ù„Ù… Ø£ØµÙ„",
                    selectRakats: "Ø§Ø®ØªØ± Ø¹Ø¯Ø¯ Ø§Ù„Ø±ÙƒØ¹Ø§Øª",
                    save: "Ø­ÙØ¸",
                    saved: "ØªÙ… Ø§Ù„Ø­ÙØ¸",
                    day: "Ø§Ù„ÙŠÙˆÙ…",
                    rakat: "Ø±ÙƒØ¹Ø©",
                    rakats: "Ø±ÙƒØ¹Ø§Øª",
                    futureDay: "ÙŠÙˆÙ… Ù‚Ø§Ø¯Ù…",
                    previousDay: "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚",
                    nextDay: "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ",
                    currentDay: "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ",
                    locked: "Ù…Ù‚ÙÙ„",
                                                                   navMushaf: "Ø§Ù„Ù…ØµØ­Ù Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ",

                      navQuranKhatm: "Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†",
                        navLessons: "Ø§Ù„Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¯ÙŠÙ†ÙŠØ©",
                          navQuestions: "Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ©",
                                                            navHadith: "Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«",
                    completed: "Ù…ÙƒØªÙ…Ù„"
                },
                en: {
                    pageTitle: "Taraweeh Prayer",
                    subtitle: "Track Taraweeh prayer",
                    navHome: "Home",
                     navQuestions: "Ramadan Questions",
                                         navMushaf: "Interactive Mushaf",

                                                            navHadith: "Hadith Library",

                    navDuas: "Duas",
                    appTitle: "My Salah",
                    navTaraweeh: "Taraweeh",
                    navSadaqati: " My Charity",
                    progressTitle: "Your Monthly Progress",
                    daysCompleted: "Days Completed",
                    calendarTitle: "Month Days",
                    statsTitle: "Taraweeh Statistics",
                    totalDays: "Total Days",
                    prayedDays: "Prayed Days",
                    missedDays: "Missed Days",
                    totalRakats: "Total Rakats",
                    avgRakats: "Average Rakats",
                    bestDay: "Best Day",
                    prayed: "Prayed",
                    notPrayed: "Not Prayed",
                    selectRakats: "Select Rakats",
                    save: "Save",
                    saved: "Saved",
                    day: "Day",
                    rakat: "rakat",
                    rakats: "rakats",
                    futureDay: "Future Day",
                    previousDay: "Previous Day",
                    nextDay: "Next Day",
                    currentDay: "Current Day",
                    locked: "Locked",
navQuranKhatm: "Quran Khatm",
navRamadanDuas: "Ramadan Duas",
navLessons: "Islamic Lessons",
aboutSite: "About the Website" ,

                    completed: "Completed"
                }
            };

            const dayNames = {
                ar: ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'],
                en: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
            };

            const months = {
                ar: ["ÙŠÙ†Ø§ÙŠØ±", "ÙØ¨Ø±Ø§ÙŠØ±", "Ù…Ø§Ø±Ø³", "Ø£Ø¨Ø±ÙŠÙ„", "Ù…Ø§ÙŠÙˆ", "ÙŠÙˆÙ†ÙŠÙˆ", "ÙŠÙˆÙ„ÙŠÙˆ", "Ø£ØºØ³Ø·Ø³", "Ø³Ø¨ØªÙ…Ø¨Ø±", "Ø£ÙƒØªÙˆØ¨Ø±", "Ù†ÙˆÙÙ…Ø¨Ø±", "Ø¯ÙŠØ³Ù…Ø¨Ø±"],
                en: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
            };

            // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® ---
const START_DATE = new Date(2026, 1, 17); // 18 ÙØ¨Ø±Ø§ÙŠØ± 2026
const END_DATE = new Date(2026, 2, 19, 23, 59, 59, 999); // Ù†Ù‡Ø§ÙŠØ© 20 Ù…Ø§Ø±Ø³ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„


            // Ø¥Ù†Ø´Ø§Ø¡ Ù…ØµÙÙˆÙØ© Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙŠØ§Ù…
            const allDays = [];
            let curr = new Date(START_DATE);
            while (curr <= END_DATE) {
                allDays.push(new Date(curr));
                curr.setDate(curr.getDate() + 1);
            }
            totalDaysCount.textContent = allDays.length;

            // --- Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ---
// Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù„ØºØ© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¨Ø§Ù‚ÙŠ ØµÙØ­Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹
let currentLang = localStorage.getItem('language') || 'ar';
function getLocalToday() {
    const now = new Date();
    return new Date(now.getFullYear(), now.getMonth(), now.getDate());
}

const today = getLocalToday();

            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø¥Ø°Ø§ ÙƒØ§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø·Ø§Ù‚ØŒ Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø£ÙˆÙ„ ÙŠÙˆÙ…)
            let currentDate = today >= START_DATE && today <= END_DATE ? today : new Date(START_DATE);
            let selectedDate = new Date(currentDate);
            let taraweehData = JSON.parse(localStorage.getItem('taraweehData')) || {};
            
            // Ù…ØªØºÙŠØ±Ø§Øª Ù…Ø¤Ù‚ØªØ© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸
            let currentStatus = false;
            let currentRakat = 8;

            // --- Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±ÙƒØ¹Ø§Øª ---
            function createRakatButtons() {
                rakatOptions.innerHTML = '';
                rakatValues.forEach(value => {
                    const btn = document.createElement('button');
                    btn.className = `rakat-option ${value === currentRakat ? 'selected' : ''}`;
                    btn.textContent = value;
                    btn.onclick = () => selectRakat(value);
                    rakatOptions.appendChild(btn);
                });
            }

            function selectRakat(value) {
                if (!isDayAccessible(selectedDate)) return;
                currentRakat = value;
                updateRakatButtons();
            }

            function updateRakatButtons() {
                const buttons = document.querySelectorAll('.rakat-option');
                buttons.forEach(btn => {
                    const value = parseInt(btn.textContent);
                    if (value === currentRakat) {
                        btn.classList.add('selected');
                    } else {
                        btn.classList.remove('selected');
                    }
                });
            }

            // --- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙŠÙˆÙ… ---
            function isDayAccessible(date) {
                return date <= today;
            }

            // --- ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ---
            function updateProgressBar() {
                let completedDays = 0;
                
                allDays.forEach(day => {
                    const dateKey = formatDateKey(day);
                    const dayData = taraweehData[dateKey] || { prayed: false };
                    if (dayData.prayed && day <= today) {
                        completedDays++;
                    }
                });
                
                const totalAccessibleDays = allDays.filter(day => day <= today).length;
                const percentage = totalAccessibleDays > 0 ? Math.round((completedDays / totalAccessibleDays) * 100) : 0;
                
                progressBar.style.width = `${percentage}%`;
                progressPercentage.textContent = `${percentage}%`;
                completedDaysCount.textContent = completedDays;
            }

            // --- Ø¯ÙˆØ§Ù„ Ø§Ù„Ø«ÙŠÙ… ÙˆØ§Ù„Ù„ØºØ© ---
            function setupTheme() {
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                }
            }

            function toggleTheme() {
                if (document.body.classList.contains('transition-active')) return;
                
                const root = document.documentElement;
                const isDarkMode = document.body.classList.contains('dark-mode');
                const rect = themeSwitcher.getBoundingClientRect();
                const x = rect.left + rect.width / 2;
                const y = rect.top + rect.height / 2;
                
                root.style.setProperty('--clip-x', `${x}px`);
                root.style.setProperty('--clip-y', `${y}px`);
                root.style.setProperty('--transition-bg', isDarkMode ? 'var(--background-color-light)' : 'var(--background-color-dark)');
                
                document.body.classList.add('transition-active');
                
                setTimeout(() => {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
                }, 300);
                
                setTimeout(() => document.body.classList.remove('transition-active'), 600);
            }

           function toggleLanguage() {
    currentLang = currentLang === 'ar' ? 'en' : 'ar';

    // ØªÙˆØ­ÙŠØ¯ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø¹ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    localStorage.setItem('language', currentLang);

    document.documentElement.lang = currentLang;
    document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
    
    document.getElementById('lang-toggle').textContent = currentLang === 'ar' ? 'EN' : 'Ø¹Ø±Ø¨ÙŠ';
    
    // ØªØ±Ø¬Ù…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
    document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[currentLang][key]) {
            el.textContent = translations[currentLang][key];
        }
    });
    
    renderPlans();
    if (currentPlanId) {
        renderPlanDetails(currentPlanId);
    }
}


            function showNotification(message) {
                notification.innerHTML = `<i class="fas fa-check-circle"></i> <div>${message}</div>`;
                notification.classList.add('show');
                setTimeout(() => notification.classList.remove('show'), 3000);
            }

            // --- Ø¯ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ ---
            function loadDayData() {
                const dateKey = formatDateKey(selectedDate);
                const dayData = taraweehData[dateKey] || { prayed: false, rakat: 0 };
                
                currentStatus = dayData.prayed;
                currentRakat = dayData.rakat || 8;
                
                updateUI();
            }

            function updateUI() {
                const isAccessible = isDayAccessible(selectedDate);
                
                // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙŠÙˆÙ… Ù…Ø¹ Ø§Ù„ØªØ±Ø¬Ù…Ø©
                const dayName = dayNames[currentLang][selectedDate.getDay()];
                const dayDate = formatDate(selectedDate);
                dayTitle.innerHTML = `${translations[currentLang].day} ${dayDate} <span>(${dayName})</span>`;
                
                // ØªØ­Ø¯ÙŠØ« Ø´ÙƒÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„ÙˆØµÙˆÙ„
                if (!isAccessible) {
                    taraweehCard.classList.add('locked');
                } else {
                    taraweehCard.classList.remove('locked');
                    
                    if (currentStatus) {
                        taraweehCard.classList.add('completed');
                        prayedBtn.classList.add('prayed');
                        prayedBtn.classList.remove('not-prayed');
                        notPrayedBtn.classList.add('not-prayed');
                        notPrayedBtn.classList.remove('prayed');
                    } else {
                        taraweehCard.classList.remove('completed');
                        notPrayedBtn.classList.add('prayed');
                        notPrayedBtn.classList.remove('not-prayed');
                        prayedBtn.classList.add('not-prayed');
                        prayedBtn.classList.remove('prayed');
                    }
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±ÙƒØ¹Ø§Øª
                updateRakatButtons();
                
                // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
                const currentIndex = allDays.findIndex(d => formatDateKey(d) === formatDateKey(selectedDate));
                prevDayBtn.disabled = currentIndex === 0;
                nextDayBtn.disabled = currentIndex === allDays.length - 1 || !isDayAccessible(allDays[currentIndex + 1]);
                
                // ØªØ¹Ø·ÙŠÙ„/ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø­Ø³Ø¨ Ø§Ù„ÙˆØµÙˆÙ„
                const interactiveElements = [prayedBtn, notPrayedBtn, saveBtn, ...document.querySelectorAll('.rakat-option')];
                interactiveElements.forEach(el => {
                    if (el) {
                        el.disabled = !isAccessible;
                    }
                });
            }

            // --- Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„ ---
            window.setPrayerStatus = function(status) {
                if (!isDayAccessible(selectedDate)) return;
                currentStatus = status;
                updateUI();
            };

            window.savePrayer = function() {
                if (!isDayAccessible(selectedDate)) return;
                
                const dateKey = formatDateKey(selectedDate);
                
                taraweehData[dateKey] = {
                    prayed: currentStatus,
                    rakat: currentStatus ? currentRakat : 0
                };
                
                localStorage.setItem('taraweehData', JSON.stringify(taraweehData));
                
                renderCalendar();
                updateStats();
                updateProgressBar();
                showNotification(translations[currentLang].saved);
            };

            // --- Ø§Ù„ØªÙ‚ÙˆÙŠÙ… ---
            function renderCalendar() {
                calendarGrid.innerHTML = '';
                
                allDays.forEach(day => {
                    const dateKey = formatDateKey(day);
                    const dayData = taraweehData[dateKey] || { prayed: false, rakat: 0 };
                    const isToday = isSameDay(day, today);
                    const isSelected = isSameDay(day, selectedDate);
                    const isAccessible = isDayAccessible(day);
                    
                    const dayName = dayNames[currentLang][day.getDay()];
                    const dayDate = formatDate(day);
                    
                    const card = document.createElement('div');
                    card.className = `calendar-day ${dayData.prayed ? 'completed' : ''} ${isToday ? 'today' : ''} ${isSelected ? 'active' : ''} ${!isAccessible ? 'future' : ''}`;
                    
                    if (isAccessible) {
                        card.onclick = () => selectDay(day);
                    }
                    
                    const rakatText = currentLang === 'ar' ? 'Ø±ÙƒØ¹Ø©' : 'rakats';
                    
                    card.innerHTML = `
                        <div class="calendar-day-header">
                            <span class="calendar-day-name">${dayName}</span>
                            <span class="calendar-day-date">${dayDate}</span>
                        </div>
                        <div class="calendar-day-status">
                            <i class="fas ${dayData.prayed ? 'fa-check-circle' : dayData.rakat > 0 ? 'fa-adjust' : 'fa-circle'}"></i>
                        </div>
                        <div class="calendar-day-stats">
                            ${dayData.prayed ? dayData.rakat + ' ' + rakatText : !isAccessible ? 'ğŸ”’' : 'â€”'}
                        </div>
                    `;
                    
                    calendarGrid.appendChild(card);
                });
            }

            function selectDay(day) {
                if (!isDayAccessible(day)) return;
                selectedDate = new Date(day);
                loadDayData();
                renderCalendar();
            }

            // --- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ---
            function updateStats() {
                let prayedDays = 0;
                let totalRakats = 0;
                let bestRakats = 0;
                let bestDayStr = '';
                
                allDays.forEach(day => {
                    if (!isDayAccessible(day)) return;
                    
                    const dateKey = formatDateKey(day);
                    const dayData = taraweehData[dateKey] || { prayed: false, rakat: 0 };
                    
                    if (dayData.prayed) {
                        prayedDays++;
                        totalRakats += dayData.rakat;
                        
                        if (dayData.rakat > bestRakats) {
                            bestRakats = dayData.rakat;
                            bestDayStr = formatDate(day);
                        }
                    }
                });
                
                const missedDays = allDays.filter(day => isDayAccessible(day)).length - prayedDays;
                const avgRakats = prayedDays > 0 ? Math.round(totalRakats / prayedDays) : 0;
                
                totalDaysEl.textContent = allDays.filter(day => isDayAccessible(day)).length;
                prayedDaysEl.textContent = prayedDays;
                missedDaysEl.textContent = missedDays;
                totalRakatsEl.textContent = totalRakats;
                avgRakatsEl.textContent = avgRakats;
                bestDayEl.textContent = bestDayStr || '-';
            }

            // --- Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠØ§Ù… ---
            function changeDay(delta) {
                const currentIndex = allDays.findIndex(d => formatDateKey(d) === formatDateKey(selectedDate));
                const newIndex = currentIndex + delta;
                
                if (newIndex >= 0 && newIndex < allDays.length) {
                    const newDate = allDays[newIndex];
                    if (isDayAccessible(newDate)) {
                        selectedDate = new Date(newDate);
                        loadDayData();
                        renderCalendar();
                    }
                }
            }

            function goToToday() {
                if (today >= START_DATE && today <= END_DATE) {
                    selectedDate = new Date(today);
                } else {
                    selectedDate = new Date(START_DATE);
                }
                
                loadDayData();
                renderCalendar();
            }

            // --- Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ---
            function formatDate(date) {
                const d = date.getDate();
                const m = months[currentLang][date.getMonth()];
                return `${d} ${m}`;
            }
            
          function formatDateKey(date) {
    // ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø­Ù„ÙŠ ÙˆÙ„ÙŠØ³ UTC
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
}

            
            function isSameDay(d1, d2) {
                return d1.toDateString() === d2.toDateString();
            }

            // --- Ø§Ù„ØªÙ…Ø±ÙŠØ± ---
            function handleScroll() {
                backToTopBtn.classList.toggle('show', window.scrollY > 300);
            }
            
            function scrollToTop() { 
                window.scrollTo({ top: 0, behavior: 'smooth' }); 
            }

            // --- Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ---
            function init() {
                setupTheme();
                
                themeSwitcher.addEventListener('click', toggleTheme);
                langSwitcher.addEventListener('click', toggleLanguage);
                window.addEventListener('scroll', handleScroll);
                backToTopBtn.addEventListener('click', scrollToTop);
                
                prevDayBtn.addEventListener('click', () => changeDay(-1));
                nextDayBtn.addEventListener('click', () => changeDay(1));
                todayBtn.addEventListener('click', goToToday);

                // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
                document.documentElement.lang = currentLang;
                document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
                document.getElementById('lang-toggle').textContent = currentLang === 'ar' ? 'EN' : 'Ø¹Ø±Ø¨ÙŠ';
                
                // ØªØ¹ÙŠÙŠÙ† Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                prevDayBtn.title = translations[currentLang].previousDay;
                nextDayBtn.title = translations[currentLang].nextDay;
                todayBtn.title = translations[currentLang].currentDay;
                
                // ØªØ±Ø¬Ù…Ø© Ø£ÙˆÙ„ÙŠØ©
                document.querySelectorAll('[data-key]').forEach(el => {
                    const key = el.getAttribute('data-key');
                    if (translations[currentLang][key]) {
                        el.textContent = translations[currentLang][key];
                    }
                });
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±ÙƒØ¹Ø§Øª
                createRakatButtons();
                
                // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„
                loadDayData();
                renderCalendar();
                updateStats();
                updateProgressBar();
            }

            init();
        })();
    </script>
</body>
</html>